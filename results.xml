<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="0" failures="8" skipped="0" tests="225" time="16.275" timestamp="2026-02-21T22:47:31.102178-08:00" hostname="MachineLearning"><testcase classname="tests.test_agent_unwrap.TestTryUnwrapNested" name="test_flat_valid_response_returns_as_is" time="0.011" /><testcase classname="tests.test_agent_unwrap.TestTryUnwrapNested" name="test_single_wrapper_unwrap" time="0.006" /><testcase classname="tests.test_agent_unwrap.TestTryUnwrapNested" name="test_double_nested_unwrap" time="0.003" /><testcase classname="tests.test_agent_unwrap.TestTryUnwrapNested" name="test_completely_wrong_returns_none" time="0.002" /><testcase classname="tests.test_agent_unwrap.TestTryUnwrapNested" name="test_empty_dict_returns_none" time="0.003" /><testcase classname="tests.test_agent_unwrap.TestTryUnwrapNested" name="test_depth_limit_prevents_infinite_recursion" time="0.002" /><testcase classname="tests.test_agent_unwrap.TestUnwrapValidation" name="test_unwrapped_fundamental_validates" time="0.002" /><testcase classname="tests.test_agent_unwrap.TestUnwrapValidation" name="test_unwrapped_sentiment_validates" time="0.001" /><testcase classname="tests.test_clear_data.TestClearData" name="test_clear_returns_cleared" time="0.004" /><testcase classname="tests.test_clear_data.TestClearData" name="test_clear_handles_error" time="0.003" /><testcase classname="tests.test_clear_data.TestClearData" name="test_clear_partial" time="0.003" /><testcase classname="tests.test_clear_data.TestClearData" name="test_clear_empty_tables" time="0.002" /><testcase classname="tests.test_congress.TestCongressCSRF" name="test_csrf_extraction" time="0.003" /><testcase classname="tests.test_congress.TestCongressReportParsing" name="test_parse_report_with_trades" time="0.004" /><testcase classname="tests.test_congress.TestCongressReportParsing" name="test_parse_report_pdf_skipped" time="0.001" /><testcase classname="tests.test_congress.TestCongressReportParsing" name="test_parse_report_short_row" time="0.001" /><testcase classname="tests.test_congress.TestCongressDBIntegration" name="test_tickers_from_db" time="0.001" /><testcase classname="tests.test_congress.TestCongressDBIntegration" name="test_daily_guard" time="0.003" /><testcase classname="tests.test_congress.TestCongressDBIntegration" name="test_get_trades_for_ticker" time="0.002" /><testcase classname="tests.test_congress.TestCongressDBIntegration" name="test_save_trades" time="0.001" /><testcase classname="tests.test_congress.TestCongressModels" name="test_scored_ticker_congress_source" time="0.001" /><testcase classname="tests.test_congress.TestCongressModels" name="test_scored_ticker_sec_13f_source" time="0.001" /><testcase classname="tests.test_congress.TestCongressModels" name="test_scored_ticker_multi_source" time="0.001" /><testcase classname="tests.test_data_pipeline.TestPhase8DBTables" name="test_all_new_tables_exist" time="0.088" /><testcase classname="tests.test_data_pipeline.TestPhase8DBTables" name="test_news_articles_has_source_column" time="0.096" /><testcase classname="tests.test_data_pipeline.TestPhase8DBTables" name="test_technicals_has_expanded_columns" time="0.073" /><testcase classname="tests.test_data_pipeline.TestYouTube24hFilter" name="test_curated_channels_exist" time="0.001" /><testcase classname="tests.test_data_pipeline.TestYouTube24hFilter" name="test_no_truncation_constant" time="0.001" /><testcase classname="tests.test_data_pipeline.TestYouTube24hFilter" name="test_full_transcript_stored" time="0.001" /><testcase classname="tests.test_data_pipeline.TestYouTube24hFilter" name="test_24h_filter_skips_old_videos" time="0.008" /><testcase classname="tests.test_data_pipeline.TestYouTubeHistoricalRetrieval" name="test_insert_and_retrieve_transcripts" time="0.071" /><testcase classname="tests.test_data_pipeline.TestYouTubeHistoricalRetrieval" name="test_accumulation_across_runs" time="0.092" /><testcase classname="tests.test_data_pipeline.TestNewsHistoricalRetrieval" name="test_insert_and_retrieve_news" time="0.130" /><testcase classname="tests.test_data_pipeline.TestNewsHistoricalRetrieval" name="test_news_accumulation" time="0.148" /><testcase classname="tests.test_data_pipeline.TestAgentContextHistoricalData" name="test_sentiment_agent_formats_multi_source_news" time="0.004" /><testcase classname="tests.test_data_pipeline.TestAgentContextHistoricalData" name="test_sentiment_agent_handles_empty_data" time="0.001" /><testcase classname="tests.test_data_pipeline.TestRiskComputer" name="test_instantiation" time="1.380" /><testcase classname="tests.test_data_pipeline.TestRiskComputer" name="test_risk_metrics_dataclass" time="0.001" /><testcase classname="tests.test_data_pipeline.TestFundamentalAgentNewData" name="test_formats_balance_sheet_data" time="0.001" /><testcase classname="tests.test_data_pipeline.TestFundamentalAgentNewData" name="test_formats_analyst_data" time="0.001" /><testcase classname="tests.test_data_pipeline.TestVTTParsing" name="test_basic_vtt" time="0.001" /><testcase classname="tests.test_data_pipeline.TestVTTParsing" name="test_dedup_overlapping_segments" time="0.001" /><testcase classname="tests.test_data_pipeline.TestVTTParsing" name="test_empty_vtt" time="0.001" /><testcase classname="tests.test_discovery.TestTickerValidator" name="test_exclusion_list_rejects_jargon" time="0.599"><failure message="AssertionError: AI should be rejected by exclusion list&#10;assert not True">self = &lt;tests.test_discovery.TestTickerValidator object at 0x00000123DE722710&gt;

    def test_exclusion_list_rejects_jargon(self) -&gt; None:
        """Common words and finance jargon should be rejected."""
        jargon = ["YOLO", "DD", "ATH", "IMO", "CEO", "SEC", "AI", "TLDR"]
        log.info("Testing exclusion list with: %s", jargon)
        for word in jargon:
            result = self.validator.validate(word)
            log.info("  %s → rejected=%s", word, not result)
&gt;           assert not result, f"{word} should be rejected by exclusion list"
E           AssertionError: AI should be rejected by exclusion list
E           assert not True

tests\test_discovery.py:45: AssertionError</failure></testcase><testcase classname="tests.test_discovery.TestTickerValidator" name="test_exclusion_list_rejects_common_words" time="0.001" /><testcase classname="tests.test_discovery.TestTickerValidator" name="test_length_validation" time="0.001" /><testcase classname="tests.test_discovery.TestTickerValidator" name="test_yfinance_valid_ticker" time="0.002" /><testcase classname="tests.test_discovery.TestTickerValidator" name="test_yfinance_no_price" time="0.002" /><testcase classname="tests.test_discovery.TestTickerValidator" name="test_caching" time="0.001" /><testcase classname="tests.test_discovery.TestTickerValidator" name="test_batch_validate" time="0.002" /><testcase classname="tests.test_discovery.TestRedditCollector" name="test_extract_tickers_basic" time="0.001" /><testcase classname="tests.test_discovery.TestRedditCollector" name="test_extract_tickers_dollar_sign" time="0.001" /><testcase classname="tests.test_discovery.TestRedditCollector" name="test_extract_tickers_empty" time="0.001" /><testcase classname="tests.test_discovery.TestRedditCollector" name="test_extract_tickers_deduplicates" time="0.001" /><testcase classname="tests.test_discovery.TestRedditCollector" name="test_fetch_subreddit_success" time="0.064" /><testcase classname="tests.test_discovery.TestRedditCollector" name="test_fetch_subreddit_rate_limit" time="5.161" /><testcase classname="tests.test_discovery.TestRedditCollector" name="test_get_thread_data" time="0.079" /><testcase classname="tests.test_discovery.TestTickerScanner" name="test_extract_tickers" time="0.001"><failure message="AttributeError: 'TickerScanner' object has no attribute '_extract_tickers'. Did you mean: '_llm_extract_tickers'?">self = &lt;tests.test_discovery.TestTickerScanner object at 0x00000123DE722D50&gt;

    def test_extract_tickers(self) -&gt; None:
        """Regex should find tickers in text."""
        text = "We're bullish on NVDA and TSLA. Also watch AAPL."
&gt;       result = self.scanner._extract_tickers(text)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       AttributeError: 'TickerScanner' object has no attribute '_extract_tickers'. Did you mean: '_llm_extract_tickers'?

tests\test_discovery.py:274: AttributeError</failure></testcase><testcase classname="tests.test_discovery.TestTickerScanner" name="test_extract_tickers_filters_noise" time="0.002"><failure message="AttributeError: 'TickerScanner' object has no attribute '_extract_tickers'. Did you mean: '_llm_extract_tickers'?">self = &lt;tests.test_discovery.TestTickerScanner object at 0x00000123DE722E90&gt;

    def test_extract_tickers_filters_noise(self) -&gt; None:
        """Exclusion list words should not appear."""
        text = "NVDA IS THE BEST AI CEO PICK FOR YOLO"
&gt;       result = self.scanner._extract_tickers(text)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       AttributeError: 'TickerScanner' object has no attribute '_extract_tickers'. Did you mean: '_llm_extract_tickers'?

tests\test_discovery.py:283: AttributeError</failure></testcase><testcase classname="tests.test_discovery.TestTickerScanner" name="test_context_snippet" time="0.001"><failure message="AttributeError: 'TickerScanner' object has no attribute '_get_context_snippet'">self = &lt;tests.test_discovery.TestTickerScanner object at 0x00000123DE716C40&gt;

    def test_context_snippet(self) -&gt; None:
        """Should return text window around first ticker mention."""
        text = "xxxx " * 20 + "NVDA is amazing" + " xxxx" * 20
&gt;       snippet = self.scanner._get_context_snippet(text, "NVDA")
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       AttributeError: 'TickerScanner' object has no attribute '_get_context_snippet'

tests\test_discovery.py:293: AttributeError</failure></testcase><testcase classname="tests.test_discovery.TestTickerScanner" name="test_scan_no_transcripts" time="0.002"><failure message="TypeError: object of type 'coroutine' has no len()">self = &lt;tests.test_discovery.TestTickerScanner object at 0x00000123DE716D70&gt;
mock_get_db = &lt;MagicMock name='get_db' id='1254126261920'&gt;

    @patch("app.collectors.ticker_scanner.get_db")
    def test_scan_no_transcripts(self, mock_get_db: MagicMock) -&gt; None:
        """No transcripts in DB should return empty list."""
        mock_db = MagicMock()
        mock_db.execute.return_value.fetchall.return_value = []
        mock_get_db.return_value = mock_db
    
        result = self.scanner.scan_recent_transcripts(hours=24)
&gt;       log.info("No transcripts → %d results", len(result))
                                                ^^^^^^^^^^^
E       TypeError: object of type 'coroutine' has no len()

tests\test_discovery.py:306: TypeError</failure></testcase><testcase classname="tests.test_discovery.TestTickerScanner" name="test_scan_with_transcript" time="0.002"><failure message="TypeError: object of type 'coroutine' has no len()">self = &lt;tests.test_discovery.TestTickerScanner object at 0x00000123DE7B30B0&gt;
mock_get_db = &lt;MagicMock name='get_db' id='1254126258560'&gt;
mock_validate = &lt;MagicMock name='validate_batch' id='1254126259904'&gt;

    @patch("app.collectors.ticker_scanner.TickerValidator.validate_batch")
    @patch("app.collectors.ticker_scanner.get_db")
    def test_scan_with_transcript(
        self, mock_get_db: MagicMock, mock_validate: MagicMock
    ) -&gt; None:
        """Should extract and score tickers from a transcript."""
        mock_db = MagicMock()
        mock_db.execute.return_value.fetchall.return_value = [
            (
                "NVDA",  # ticker column
                "video123",
                "NVDA Earnings Analysis",
                "FinanceChannel",
                "Buy NVDA because their GPU sales are incredible. "
                "NVDA revenue up 200%. Also look at TSLA.",
            ),
        ]
        mock_get_db.return_value = mock_db
        mock_validate.return_value = ["NVDA", "TSLA"]
    
        result = self.scanner.scan_recent_transcripts(hours=24)
&gt;       log.info("Scan result: %d tickers", len(result))
                                            ^^^^^^^^^^^
E       TypeError: object of type 'coroutine' has no len()

tests\test_discovery.py:330: TypeError</failure></testcase><testcase classname="tests.test_discovery.TestDiscoveryService" name="test_merge_scores_basic" time="0.001" /><testcase classname="tests.test_discovery.TestDiscoveryService" name="test_merge_sorted_by_score" time="0.001" /><testcase classname="tests.test_discovery.TestDiscoveryService" name="test_save_to_db_inserts" time="0.002" /><testcase classname="tests.test_discovery.TestDiscoveryModels" name="test_scored_ticker_defaults" time="0.001" /><testcase classname="tests.test_discovery.TestDiscoveryModels" name="test_discovery_result_defaults" time="0.001" /><testcase classname="tests.test_discovery.TestDiscoveryModels" name="test_scored_ticker_serialization" time="0.001" /><testcase classname="tests.test_discovery.TestDiscoveryModels" name="test_discovery_result_transcript_count" time="0.001" /><testcase classname="tests.test_discovery.TestDiscoveryModels" name="test_discovery_result_transcript_count_default" time="0.001" /><testcase classname="tests.test_discovery.TestTranscriptCollection" name="test_collect_transcripts_calls_youtube_collector" time="0.003" /><testcase classname="tests.test_discovery.TestTranscriptCollection" name="test_collect_transcripts_empty_list" time="0.001" /><testcase classname="tests.test_discovery.TestYouTubeCollectorDiscoveryMode" name="test_discovery_mode_skips_daily_guard" time="0.002" /><testcase classname="tests.test_discovery.TestYouTubeCollectorDiscoveryMode" name="test_normal_mode_uses_daily_guard" time="0.002" /><testcase classname="tests.test_pipeline_freeze.TestHoldingsCap" name="test_max_holdings_constant_exists" time="0.001" /><testcase classname="tests.test_pipeline_freeze.TestHoldingsCap" name="test_per_filer_timeout_exists" time="0.001" /><testcase classname="tests.test_pipeline_freeze.TestHoldingsCap" name="test_scrape_filer_caps_holdings" time="0.011" /><testcase classname="tests.test_pipeline_freeze.TestNoYfinanceFallback" name="test_known_cusip_still_works" time="0.001" /><testcase classname="tests.test_pipeline_freeze.TestNoYfinanceFallback" name="test_name_fallback_still_works" time="0.001" /><testcase classname="tests.test_pipeline_freeze.TestNoYfinanceFallback" name="test_yfinance_never_called" time="0.001" /><testcase classname="tests.test_pipeline_freeze.TestNoYfinanceFallback" name="test_unknown_cusip_returns_empty_fast" time="0.002" /><testcase classname="tests.test_pipeline_freeze.TestThreadExecutor" name="test_scrape_all_filers_method_exists" time="0.001" /><testcase classname="tests.test_pipeline_freeze.TestThreadExecutor" name="test_collect_recent_holdings_is_async" time="0.001" /><testcase classname="tests.test_pipeline_freeze.TestDiscoveryTimeout" name="test_timed_collect_handles_timeout" time="0.113" /><testcase classname="tests.test_pipeline_freeze.TestDiscoveryTimeout" name="test_timed_collect_passes_results" time="0.001" /><testcase classname="tests.test_portfolio_strategist.TestPortfolioStrategist" name="test_init" time="0.002" /><testcase classname="tests.test_portfolio_strategist.TestPortfolioStrategist" name="test_tool_get_portfolio" time="0.005" /><testcase classname="tests.test_portfolio_strategist.TestPortfolioStrategist" name="test_tool_get_all_candidates_no_dossiers" time="0.002" /><testcase classname="tests.test_portfolio_strategist.TestPortfolioStrategist" name="test_tool_place_buy_insufficient_cash" time="0.003" /><testcase classname="tests.test_portfolio_strategist.TestPortfolioStrategist" name="test_tool_place_buy_too_large" time="0.003" /><testcase classname="tests.test_portfolio_strategist.TestPortfolioStrategist" name="test_tool_set_triggers_no_position" time="0.003" /><testcase classname="tests.test_portfolio_strategist.TestPortfolioStrategist" name="test_run_finish_immediately" time="0.007" /><testcase classname="tests.test_portfolio_strategist.TestPortfolioStrategist" name="test_run_buy_then_finish" time="0.009" /><testcase classname="tests.test_portfolio_strategist.TestLLMServiceRetry" name="test_estimate_tokens" time="0.001" /><testcase classname="tests.test_portfolio_strategist.TestLLMServiceRetry" name="test_trim_messages" time="0.001" /><testcase classname="tests.test_portfolio_strategist.TestLLMServiceRetry" name="test_trim_preserves_short_messages" time="0.001" /><testcase classname="tests.test_portfolio_strategist.TestCleanJsonMultiObject" name="test_extracts_first_json_from_multi_object" time="0.001" /><testcase classname="tests.test_portfolio_strategist.TestCleanJsonMultiObject" name="test_extracts_json_from_prose" time="0.001" /><testcase classname="tests.test_portfolio_strategist.TestCleanJsonMultiObject" name="test_handles_markdown_fences_multi_object" time="0.001" /><testcase classname="tests.test_portfolio_strategist.TestCleanJsonMultiObject" name="test_single_valid_json_unchanged" time="0.001" /><testcase classname="tests.test_portfolio_strategist.TestCleanJsonMultiObject" name="test_truncated_json_returns_best_effort" time="0.001" /><testcase classname="tests.test_rss_news.TestTickerExtraction" name="test_dollar_sign_tickers" time="0.001" /><testcase classname="tests.test_rss_news.TestTickerExtraction" name="test_excludes_common_words" time="0.001" /><testcase classname="tests.test_rss_news.TestTickerExtraction" name="test_mixed_content" time="0.001" /><testcase classname="tests.test_rss_news.TestTickerExtraction" name="test_empty_text" time="0.001" /><testcase classname="tests.test_rss_news.TestTickerExtraction" name="test_limits_to_10" time="0.001" /><testcase classname="tests.test_rss_news.TestFeedParsing" name="test_scrape_feed_extracts_valid_entries" time="0.003" /><testcase classname="tests.test_rss_news.TestFeedParsing" name="test_skips_short_content" time="0.002" /><testcase classname="tests.test_rss_news.TestFeedParsing" name="test_deduplicates_by_hash" time="0.002" /><testcase classname="tests.test_rss_news.TestRSSDBIntegration" name="test_daily_guard" time="0.002" /><testcase classname="tests.test_rss_news.TestRSSDBIntegration" name="test_get_articles_for_ticker" time="0.001" /><testcase classname="tests.test_rss_news.TestRSSDBIntegration" name="test_get_discovery_tickers" time="0.003" /><testcase classname="tests.test_rss_news.TestYouTubeDurationFilter" name="test_duration_filter_logic" time="0.001" /><testcase classname="tests.test_scheduler.TestMarketHours" name="test_now_et_returns_eastern" time="0.002" /><testcase classname="tests.test_scheduler.TestMarketHours" name="test_is_market_open_returns_bool" time="0.001" /><testcase classname="tests.test_scheduler.TestMarketHours" name="test_next_market_open_returns_datetime" time="0.001" /><testcase classname="tests.test_scheduler.TestMarketHours" name="test_next_market_close_returns_datetime" time="0.001" /><testcase classname="tests.test_scheduler.TestMarketHours" name="test_market_status_returns_dict" time="0.001" /><testcase classname="tests.test_scheduler.TestMarketHours" name="test_weekday_9_30_is_open" time="0.001" /><testcase classname="tests.test_scheduler.TestReportGenerator" name="test_instantiation" time="0.002" /><testcase classname="tests.test_scheduler.TestReportGenerator" name="test_get_latest_returns_dict" time="0.001" /><testcase classname="tests.test_scheduler.TestTradingScheduler" name="test_instantiation" time="0.118" /><testcase classname="tests.test_scheduler.TestTradingScheduler" name="test_get_status_when_stopped" time="0.001" /><testcase classname="tests.test_scheduler.TestTradingScheduler" name="test_start_and_stop" time="0.005" /><testcase classname="tests.test_scheduler.TestTradingScheduler" name="test_double_start_returns_already" time="0.003" /><testcase classname="tests.test_sec_13f.TestSEC13FParsing" name="test_parse_info_table_xml" time="0.002" /><testcase classname="tests.test_sec_13f.TestSEC13FParsing" name="test_cusip_to_ticker_known" time="0.001" /><testcase classname="tests.test_sec_13f.TestSEC13FParsing" name="test_cusip_to_ticker_name_fallback" time="0.001" /><testcase classname="tests.test_sec_13f.TestSEC13FParsing" name="test_cusip_to_ticker_unknown" time="0.001" /><testcase classname="tests.test_sec_13f.TestSEC13FFilingDiscovery" name="test_find_latest_13f" time="0.001" /><testcase classname="tests.test_sec_13f.TestSEC13FFilingDiscovery" name="test_find_latest_13f_no_filings" time="0.001" /><testcase classname="tests.test_sec_13f.TestSEC13FFilingDiscovery" name="test_find_latest_13f_no_13f_forms" time="0.001" /><testcase classname="tests.test_sec_13f.TestSEC13FDBIntegration" name="test_tickers_from_db" time="0.003" /><testcase classname="tests.test_sec_13f.TestSEC13FDBIntegration" name="test_daily_guard" time="0.003" /><testcase classname="tests.test_sec_13f.TestSEC13FDBIntegration" name="test_get_holdings_for_ticker" time="0.002" /><testcase classname="tests.test_sentiment_validation.TestSentimentReportValidation" name="test_valid_report" time="0.001" /><testcase classname="tests.test_sentiment_validation.TestSentimentReportValidation" name="test_clamped_score" time="0.001" /><testcase classname="tests.test_sentiment_validation.TestSentimentReportValidation" name="test_invalid_sentiment_enum_defaults_to_neutral" time="0.001" /><testcase classname="tests.test_sentiment_validation.TestSentimentReportValidation" name="test_wrong_structure_fails_validation" time="0.001" /><testcase classname="tests.test_sentiment_validation.TestBaseAgentRescueHelpers" name="test_get_required_keys" time="0.003" /><testcase classname="tests.test_sentiment_validation.TestBaseAgentRescueHelpers" name="test_diagnose_wrong_structure" time="0.003" /><testcase classname="tests.test_sentiment_validation.TestBaseAgentRescueHelpers" name="test_diagnose_correct_structure_returns_none" time="0.002" /><testcase classname="tests.test_sentiment_validation.TestBaseAgentRescueHelpers" name="test_diagnose_invalid_json_returns_none" time="0.001" /><testcase classname="tests.test_sentiment_validation.TestBaseAgentRescueHelpers" name="test_fallback_report" time="0.002" /><testcase classname="tests.test_sentiment_validation.TestBaseAgentRescueHelpers" name="test_rescue_prompt_contains_error_info" time="0.003" /><testcase classname="tests.test_smoke.TestImports" name="test_config" time="0.001"><failure message="AssertionError: assert 'lmstudio' in ('ollama', 'openai')&#10; +  where 'lmstudio' = &lt;app.config.Settings object at 0x00000123ABD6D7F0&gt;.LLM_PROVIDER">self = &lt;tests.test_smoke.TestImports object at 0x00000123AC6AC410&gt;

    def test_config(self) -&gt; None:
        from app.config import settings
&gt;       assert settings.LLM_PROVIDER in ("ollama", "openai")
E       AssertionError: assert 'lmstudio' in ('ollama', 'openai')
E        +  where 'lmstudio' = &lt;app.config.Settings object at 0x00000123ABD6D7F0&gt;.LLM_PROVIDER

tests\test_smoke.py:12: AssertionError</failure></testcase><testcase classname="tests.test_smoke.TestImports" name="test_database" time="0.013" /><testcase classname="tests.test_smoke.TestImports" name="test_market_data_models" time="0.001" /><testcase classname="tests.test_smoke.TestImports" name="test_agent_report_models" time="0.001" /><testcase classname="tests.test_smoke.TestImports" name="test_decision_model" time="0.008" /><testcase classname="tests.test_smoke.TestImports" name="test_llm_service" time="0.001"><failure message="AssertionError: assert 'lmstudio' in ('ollama', 'openai')&#10; +  where 'lmstudio' = &lt;app.services.llm_service.LLMService object at 0x00000123AC878CD0&gt;.provider">self = &lt;tests.test_smoke.TestImports object at 0x00000123DE8857B0&gt;

    def test_llm_service(self) -&gt; None:
        from app.services.llm_service import LLMService
        llm = LLMService()
&gt;       assert llm.provider in ("ollama", "openai")
E       AssertionError: assert 'lmstudio' in ('ollama', 'openai')
E        +  where 'lmstudio' = &lt;app.services.llm_service.LLMService object at 0x00000123AC878CD0&gt;.provider

tests\test_smoke.py:70: AssertionError</failure></testcase><testcase classname="tests.test_smoke.TestImports" name="test_agents" time="0.007" /><testcase classname="tests.test_smoke.TestImports" name="test_engine" time="0.004" /><testcase classname="tests.test_smoke.TestImports" name="test_user_config_exists" time="0.001" /><testcase classname="tests.test_strategist_audit.TestStrategistAudit" name="test_log_turn" time="0.001" /><testcase classname="tests.test_strategist_audit.TestStrategistAudit" name="test_log_bad_json" time="0.001" /><testcase classname="tests.test_strategist_audit.TestStrategistAudit" name="test_log_candidates_detects_gaps" time="0.001" /><testcase classname="tests.test_strategist_audit.TestStrategistAudit" name="test_generate_report" time="0.019" /><testcase classname="tests.test_strategist_audit.TestStrategistAudit" name="test_generate_report_with_orders" time="0.018" /><testcase classname="tests.test_trading.TestModels" name="test_position_create" time="0.001" /><testcase classname="tests.test_trading.TestModels" name="test_order_create" time="0.001" /><testcase classname="tests.test_trading.TestModels" name="test_portfolio_snapshot" time="0.001" /><testcase classname="tests.test_trading.TestModels" name="test_price_trigger" time="0.001" /><testcase classname="tests.test_trading.TestSignalRouter" name="test_buy_signal_high_conviction" time="0.007" /><testcase classname="tests.test_trading.TestSignalRouter" name="test_sell_signal_low_conviction" time="0.007" /><testcase classname="tests.test_trading.TestSignalRouter" name="test_hold_signal_mid_conviction" time="0.011" /><testcase classname="tests.test_trading.TestSignalRouter" name="test_max_orders_per_day_guard" time="0.008" /><testcase classname="tests.test_trading.TestSignalRouter" name="test_daily_loss_limit_guard" time="0.007" /><testcase classname="tests.test_trading.TestSignalRouter" name="test_cooldown_guard" time="0.008" /><testcase classname="tests.test_trading.TestSignalRouter" name="test_no_duplicate_buy" time="0.007" /><testcase classname="tests.test_trading.TestSignalRouter" name="test_position_sizing_respects_limits" time="0.008" /><testcase classname="tests.test_trading.TestSignalRouter" name="test_tiered_sizing_low_conviction" time="0.007" /><testcase classname="tests.test_trading.TestSignalRouter" name="test_tiered_sizing_mid_conviction" time="0.006" /><testcase classname="tests.test_trading.TestSignalRouter" name="test_buy_at_threshold_boundary" time="0.006" /><testcase classname="tests.test_trading.TestSignalRouter" name="test_sell_no_position_returns_none" time="0.006" /><testcase classname="tests.test_trading.TestPaperTrader" name="test_initial_balance" time="0.151" /><testcase classname="tests.test_trading.TestPaperTrader" name="test_buy_reduces_cash" time="0.127" /><testcase classname="tests.test_trading.TestPaperTrader" name="test_buy_creates_position" time="0.137" /><testcase classname="tests.test_trading.TestPaperTrader" name="test_sell_closes_position" time="0.126" /><testcase classname="tests.test_trading.TestPaperTrader" name="test_insufficient_balance_rejected" time="0.104" /><testcase classname="tests.test_trading.TestPaperTrader" name="test_dca_buy" time="0.170" /><testcase classname="tests.test_trading.TestPaperTrader" name="test_sell_no_position_rejected" time="0.119" /><testcase classname="tests.test_trading.TestPaperTrader" name="test_order_history" time="0.161" /><testcase classname="tests.test_trading.TestPaperTrader" name="test_portfolio_summary" time="0.133" /><testcase classname="tests.test_trading.TestPaperTrader" name="test_triggers_created" time="0.148" /><testcase classname="tests.test_trading.TestImports" name="test_import_models" time="0.001" /><testcase classname="tests.test_trading.TestImports" name="test_import_signal_router" time="0.001" /><testcase classname="tests.test_trading.TestImports" name="test_import_paper_trader" time="0.001" /><testcase classname="tests.test_trading.TestImports" name="test_import_price_monitor" time="0.002" /><testcase classname="tests.test_watchlist.TestWatchlistModels" name="test_entry_defaults" time="0.001" /><testcase classname="tests.test_watchlist.TestWatchlistModels" name="test_entry_custom_values" time="0.001" /><testcase classname="tests.test_watchlist.TestWatchlistModels" name="test_summary_defaults" time="0.001" /><testcase classname="tests.test_watchlist.TestWatchlistModels" name="test_summary_serialization" time="0.001" /><testcase classname="tests.test_watchlist.TestWatchlistManagerCRUD" name="test_add_ticker" time="0.500" /><testcase classname="tests.test_watchlist.TestWatchlistManagerCRUD" name="test_add_duplicate" time="0.003" /><testcase classname="tests.test_watchlist.TestWatchlistManagerCRUD" name="test_add_reactivate" time="0.002" /><testcase classname="tests.test_watchlist.TestWatchlistManagerCRUD" name="test_add_empty_ticker" time="0.002" /><testcase classname="tests.test_watchlist.TestWatchlistManagerCRUD" name="test_remove_ticker" time="0.003" /><testcase classname="tests.test_watchlist.TestWatchlistManagerCRUD" name="test_remove_not_found" time="0.002" /><testcase classname="tests.test_watchlist.TestWatchlistManagerCRUD" name="test_clear" time="0.002" /><testcase classname="tests.test_watchlist.TestWatchlistImport" name="test_import_from_discovery" time="0.004" /><testcase classname="tests.test_watchlist.TestWatchlistImport" name="test_import_empty" time="0.002" /><testcase classname="tests.test_watchlist.TestWatchlistAnalysis" name="test_analyze_ticker" time="0.003" /><testcase classname="tests.test_watchlist.TestWatchlistAnalysis" name="test_analyze_ticker_error" time="0.002" /><testcase classname="tests.test_watchlist.TestWatchlistAnalysis" name="test_analyze_all_empty" time="0.002" /><testcase classname="tests.test_yfinance_live.TestLiveDataCollection" name="test_yfinance_price_history_live" time="0.293" /><testcase classname="tests.test_yfinance_live.TestLiveDataCollection" name="test_yfinance_fundamentals_live" time="0.296" /><testcase classname="tests.test_yfinance_live.TestLiveDataCollection" name="test_yfinance_financial_history_live" time="0.224" /><testcase classname="tests.test_yfinance_live.TestLiveDataCollection" name="test_yfinance_balance_sheet_live" time="0.270" /><testcase classname="tests.test_yfinance_live.TestLiveDataCollection" name="test_yfinance_cash_flow_live" time="0.266" /><testcase classname="tests.test_yfinance_live.TestLiveDataCollection" name="test_yfinance_analyst_data_live" time="0.191" /><testcase classname="tests.test_yfinance_live.TestLiveDataCollection" name="test_google_news_live" time="1.923" /><testcase classname="tests.test_youtube_collector.TestVTTParsing" name="test_basic_vtt" time="0.002" /><testcase classname="tests.test_youtube_collector.TestVTTParsing" name="test_dedup_overlapping_segments" time="0.001" /><testcase classname="tests.test_youtube_collector.TestVTTParsing" name="test_strips_html_tags" time="0.001" /><testcase classname="tests.test_youtube_collector.TestVTTParsing" name="test_empty_vtt" time="0.001" /><testcase classname="tests.test_youtube_collector.TestVTTParsing" name="test_skips_metadata_lines" time="0.001" /><testcase classname="tests.test_youtube_collector.TestNoTruncation" name="test_full_transcript_preserved" time="0.001" /><testcase classname="tests.test_youtube_collector.TestNoTruncation" name="test_short_transcript_not_modified" time="0.001" /><testcase classname="tests.test_youtube_collector.TestSearchQueries" name="test_has_multiple_queries" time="0.001" /><testcase classname="tests.test_youtube_collector.TestSearchQueries" name="test_queries_use_ticker_placeholder" time="0.001" /><testcase classname="tests.test_youtube_collector.TestSearchQueries" name="test_curated_channels_list" time="0.001" /><testcase classname="tests.test_youtube_collector.TestGetTranscriptTiering" name="test_library_first_succeeds" time="0.001" /><testcase classname="tests.test_youtube_collector.TestGetTranscriptTiering" name="test_fallback_to_ytdlp" time="0.002" /><testcase classname="tests.test_youtube_collector.TestGetTranscriptTiering" name="test_both_fail_returns_empty" time="0.002" /></testsuite></testsuites>